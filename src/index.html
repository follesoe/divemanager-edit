<!DOCTYPE html>
<html>
  <head>
    <title>Suunto DM Editor</title>
    <link rel="stylesheet" href="node_modules/normalize.css/normalize.css">
    <link rel="stylesheet" href="styles/app.css">
    <script src="node_modules/react/dist/JSXTransformer.js"></script>
    <script src="node_modules/react/dist/react.js"></script>
    <script src="scripts/nwjs/menu.js"></script>
  </head>
  <body>
    <div id="main"></div>
    <script>
      var dbpath = require('./scripts/services/dbpath'),
          gui    = require('nw.gui'),
          win    = gui.Window.get();

      var pathResult = dbpath.getPath();
      var menubar = new gui.Menu({ type: 'menubar' });

      var file = new gui.Menu();
      file.append(new gui.MenuItem({
        label: 'Open Dive Manager Folder',
        click: function () {
          if (pathResult.exists) {
            gui.Shell.showItemInFolder(pathResult.path);
          } else {
            alert('Suunto Dive Manager not found on computer');
          }
        }
      }));

      file.append(new gui.MenuItem({
        label: 'Backup Dive Manager Database',
        click: function () {
          alert('Backup!');
        }
      }));

      menubar.append(new gui.MenuItem({label: 'File', submenu: file}));
      win.menu = menubar;

      require('node-jsx').install({extension: '.js'});
      var app = require('./scripts/app.js');
    </script>
  </body>
</html>
